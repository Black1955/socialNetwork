import{G as p,j as s,A as y,t as k,v as P,w as $,r as d,x as T,d as I}from"./index-5d0c194e.js";const Y="_posts_1ks5c_1",B="_tabs_1ks5c_7",E={posts:Y,tabs:B},O="#2f2f2f",C="#fff",H="#ffb94a",M="#818181",S="#bfbfbf",W="#d7d7d7",D="_wrapper_73thz_29",q="_left_73thz_36",F="_folowed_73thz_42",J="_post_73thz_50",K="_img_73thz_62",V="_right_73thz_66",Q="_headerButton_73thz_72",U="_postComents_73thz_86",X="_setting_73thz_102",Z="_likedButton_73thz_114",ss="_dislikedButton_73thz_121",es="_dislikedNumber_73thz_128",ts="_footerLeft_73thz_131",is="_likedNumber_73thz_135",ns="_footerRight_73thz_139",cs="_share_73thz_144",as="_chat_73thz_149",os="_dischat_73thz_153",ls="_description_73thz_157",n={JET:O,"YELLOW-ORANGE":"#ff9900","BABY-POWDER":"#f3f4f0",WHITE:C,PALE_ORANGE:H,DARK_GRAY:M,GRAY:S,LIGHT_GRAY:W,wrapper:D,left:q,folowed:F,post:J,img:K,right:V,headerButton:Q,postComents:U,setting:X,likedButton:Z,dislikedButton:ss,dislikedNumber:es,footerLeft:ts,likedNumber:is,footerRight:ns,share:cs,chat:as,dischat:os,description:ls};function rs(t){return p({tag:"svg",attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M899.4 638.2h-27.198c-2.2-.6-4.2-1.6-6.4-2-57.2-8.8-102.4-56.4-106.2-112.199-4.401-62.4 31.199-115.2 89.199-132.4 7.6-2.2 15.6-3.8 23.399-5.8h27.2c1.8.6 3.4 1.6 5.4 1.8 52.8 8.6 93 46.6 104.4 98.6.8 4 2 8 3 12v27.2c-.6 1.8-1.6 3.6-1.8 5.4-8.4 52-45.4 91.599-96.801 103.6-5 1.2-9.6 2.6-14.2 3.8zM130.603 385.8l27.202.001c2.2.6 4.2 1.6 6.4 1.8 57.6 9 102.6 56.8 106.2 113.2 4 62.2-32 114.8-90.2 131.8-7.401 2.2-15 3.8-22.401 5.6h-27.2c-1.8-.6-3.4-1.6-5.2-2-52-9.6-86-39.8-102.2-90.2-2.2-6.6-3.4-13.6-5.2-20.4v-27.2c.6-1.8 1.6-3.6 1.8-5.4 8.6-52.2 45.4-91.6 96.8-103.6 4.8-1.201 9.4-2.401 13.999-3.601zm370.801.001h27.2c2.2.6 4.2 1.6 6.4 2 57.4 9 103.6 58.6 106 114.6 2.8 63-35.2 116.4-93.8 131.4-6.2 1.6-12.4 3-18.6 4.4h-27.2c-2.2-.6-4.2-1.6-6.4-2-57.4-8.8-103.601-58.6-106.2-114.6-3-63 35.2-116.4 93.8-131.4 6.4-1.6 12.6-3 18.8-4.4z"}}]})(t)}function G(t){return p({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M425.9 170.4H204.3c-21 0-38.1 17.1-38.1 38.1v154.3c0 21 17.1 38 38.1 38h126.8c2.8 0 5.6 1.2 7.6 3.2l63 58.1c3.5 3.4 9.3 2 9.3-2.9v-50.6c0-6 3.8-7.9 9.8-7.9h1c21 0 42.1-16.9 42.1-38V208.5c.1-21.1-17-38.1-38-38.1z"}},{tag:"path",attr:{d:"M174.4 145.9h177.4V80.6c0-18-14.6-32.6-32.6-32.6H80.6C62.6 48 48 62.6 48 80.6v165.2c0 18 14.6 32.6 32.6 32.6h61.1v-99.9c.1-18 14.7-32.6 32.7-32.6z"}}]})(t)}const ds="#2f2f2f",hs="#fff",fs="#ffb94a",ms="#818181",us="#bfbfbf",_s="#d7d7d7",xs="_comment_16uwf_12",js="_wrapper_16uwf_21",gs="_liked_16uwf_25",ks="_disliked_16uwf_29",ps="_name_16uwf_33",vs="_descr_16uwf_41",Ns="_commentRight_16uwf_48",bs="_settings_16uwf_53",ws="_time_16uwf_59",As="_likes_16uwf_64",Rs="_settingsLeft_16uwf_70",l={JET:ds,"YELLOW-ORANGE":"#ff9900","BABY-POWDER":"#f3f4f0",WHITE:hs,PALE_ORANGE:fs,DARK_GRAY:ms,GRAY:us,LIGHT_GRAY:_s,comment:xs,wrapper:js,liked:gs,disliked:ks,name:ps,descr:vs,commentRight:Ns,settings:bs,time:ws,likes:As,settingsLeft:Rs},Ls=({id:t,likes:e,time:a,descr:c,userName:o,liked:h,setLiked:u,logoUrl:_})=>s.jsx("div",{className:l.comment,children:s.jsxs("div",{className:l.wrapper,children:[s.jsx("div",{className:l.commentLeft,children:s.jsx(y,{height:40,width:40,url:_,userId:t})}),s.jsxs("div",{className:l.commentRight,children:[s.jsx("div",{className:l.name,children:o}),s.jsx("div",{className:l.descr,children:c}),s.jsxs("div",{className:l.settings,children:[s.jsxs("div",{className:l.settingsLeft,children:[s.jsx("div",{className:l.time,children:a}),s.jsxs("div",{className:l.likes,children:[e," likes"]})]}),h?s.jsx("div",{className:l.liked,onClick:u,children:s.jsx(k,{})}):s.jsx("div",{className:l.disliked,onClick:u,children:s.jsx(k,{})})]})]})]})}),Es=t=>{const e=Date.now()-new Date(t).getTime();switch(!0){case e>=2*24*60*60*1e3:return`${Math.floor(e/864e5)} days ago`;case e>=60*60*1e3:return`${Math.floor(e/(60*60*1e3))} hours ago`;case e>=60*1e3:return`${Math.floor(e/(60*1e3))} minutes ago`;case e>=1e3:return`${Math.floor(e/1e3)} seconds ago`;default:return null}},Gs=({folowed:t,setLiked:e,setComented:a,coments:c,comented:o,description:h,title:u,time:_,likes:v,img_url:N,liked:g,userId:f})=>s.jsxs("div",{className:n.post,children:[s.jsx("header",{className:n.header,children:s.jsxs("div",{className:n.wrapper,children:[s.jsxs("div",{className:n.left,children:[s.jsx("p",{children:u}),t?null:s.jsx("button",{className:n.folowed,children:"Follow"})]}),s.jsxs("div",{className:n.right,children:[s.jsx("p",{children:Es(_)}),s.jsx("button",{className:n.headerButton,children:s.jsx(rs,{})})]})]})}),s.jsx("div",{className:n.img,children:s.jsx("img",{className:n.img,src:N,alt:""})}),s.jsxs("footer",{children:[s.jsx("div",{className:n.wrapper,children:s.jsx("div",{className:n.description,children:h})}),s.jsxs("div",{className:n.setting,children:[s.jsxs("div",{className:n.footerLeft,children:[g?s.jsx("button",{className:n.likedButton,onClick:e,children:s.jsx(k,{size:20})}):s.jsx("button",{className:n.dislikedButton,onClick:e,children:s.jsx(k,{size:20})}),s.jsx("span",{className:g?n.likedNumber:n.dislikedNumber,children:v})]}),s.jsxs("div",{className:n.footerRight,children:[s.jsx("button",{className:n.share,children:s.jsx(P,{size:20})}),o?s.jsx("button",{className:n.chat,onClick:a,children:s.jsx(G,{size:27})}):s.jsx("button",{className:n.dischat,onClick:a,children:s.jsx(G,{size:27})})]})]})]}),s.jsx("div",{className:n.wrapper,children:o?s.jsxs("div",{className:n.postComents,children:[s.jsxs("h2",{children:["Comments ",s.jsxs("span",{children:["(",c.length,")"]})]}),s.jsx(Ls,{descr:"You pet very good ðŸ¥°",userName:"vasya",time:"2d",liked:!0,likes:123,setLiked:()=>{},logoUrl:"",id:f})]}):null})]}),ys=$.injectEndpoints({endpoints:t=>({getPosts:t.query({query:({id:e,limit:a,page:c,type:o})=>({url:`/posts/recomendposts/${e}?limit=${a}&page=${c}&type=${o}`})}),likePost:t.mutation({query:e=>({url:"/posts/like",method:"POST",body:e})}),disLikePost:t.mutation({query:e=>({url:"/posts/dislike",method:"POST",body:e})}),createPost:t.mutation({query:e=>({url:"/posts/create",method:"POST",body:e})})})}),{useGetPostsQuery:Is,useLazyGetPostsQuery:ie,useLikePostMutation:zs,useDisLikePostMutation:Ps,useCreatePostMutation:ne}=ys;function $s(t){const e=d.useRef(null),[a,c]=d.useState(!1);return d.useEffect(()=>{const o=new IntersectionObserver(h=>c(h[0].isIntersecting));return e.current&&!t&&o.observe(e.current),()=>{e.current&&o.unobserve(e.current)}},[e,t]),[e,a]}const j=({classes:t})=>{const e=["skeleton",...t,"animate"].join(" ");return s.jsx("div",{className:e})},Ts=()=>s.jsx("div",{className:n.post,style:{minHeight:"150px",padding:"10px 20px "},children:s.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[s.jsx(j,{classes:["avatar","small"]}),s.jsxs("div",{children:[s.jsx(j,{classes:["field"]}),s.jsx(j,{classes:["wide-field"]})]})]})}),ce=({tabs:t,id:e})=>{const[a,c]=d.useState([]),[o,h]=d.useState(t[0].value),[u,_]=d.useState(0),[v]=zs(),[N]=Ps(),g=async(i,w)=>{try{if(w){const x=await N({post_id:i}).unwrap();c(A=>A.map(m=>m.id===i?{...m,likes:x.likes,liked:!w}:m))}else{const x=await v({post_id:i}).unwrap();c(A=>A.map(m=>m.id===i?{...m,likes:x.likes,liked:!w}:m))}}catch(x){console.error("Error liking the post:",x)}};d.useEffect(()=>{c([]),_(0)},[o]);const{data:f,isLoading:b}=Is({id:e,limit:"5",page:u,type:o}),[z,L]=$s(b);return d.useEffect(()=>{a&&L&&_(i=>i+=f==null?void 0:f.length)},[L]),d.useEffect(()=>{f&&c(i=>[...i,...f])},[f]),s.jsxs("div",{children:[s.jsx("div",{className:E.tabs,children:s.jsx("div",{style:{display:"flex"},children:t.map(i=>s.jsx(T,{name:i.name,text:i.text,value:i.value,selectedValue:o,onChange:h},i.value))})}),s.jsx("div",{className:E.posts,children:a&&a.map(i=>s.jsx(Gs,{id:i.id,comented:i.comented,coments:i.coments,description:i.description,folowed:i.folowed,img_url:I(i.img_url),liked:i.liked,likes:i.likes,title:i.title,time:i.time,userId:i.userId,setLiked:()=>g(i.id,i.liked)},i.id))}),b&&[...Array(4).keys()].map(i=>s.jsx(Ts,{},i)),!b&&a&&s.jsx("div",{ref:z,children:"there aren`t any new posts for you"})]})},Ys="_profiles_1bu6q_1",Bs="_title_1bu6q_7",Os="_profileList_1bu6q_14",R={profiles:Ys,title:Bs,profileList:Os},Cs="#2f2f2f",Hs="#fff",Ms="#ffb94a",Ss="#818181",Ws="#bfbfbf",Ds="#d7d7d7",qs="_blog_1wk8h_12",Fs="_left_1wk8h_21",Js="_text_1wk8h_26",Ks="_userName_1wk8h_30",Vs="_desc_1wk8h_35",Qs="_blogWrapper_1wk8h_42",Us="_right_1wk8h_62",Xs="_button_1wk8h_68",r={JET:Cs,"YELLOW-ORANGE":"#ff9900","BABY-POWDER":"#f3f4f0",WHITE:Hs,PALE_ORANGE:Ms,DARK_GRAY:Ss,GRAY:Ws,LIGHT_GRAY:Ds,blog:qs,left:Fs,text:Js,userName:Ks,desc:Vs,blogWrapper:Qs,right:Us,button:Xs};function ae(t){return p({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",stroke:"#000",strokeWidth:"2",d:"M3,3 L21,21 M3,21 L21,3"}}]})(t)}function Zs(t){return p({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",stroke:"#000",strokeWidth:"2",d:"M7,7 L17,17 M7,17 L17,7"}}]})(t)}const se=({nickname:t,id:e,description:a,avatar_url:c})=>s.jsx("div",{className:r.blog,children:s.jsxs("div",{className:r.blogWrapper,children:[s.jsxs("div",{className:r.left,children:[s.jsx(y,{width:45,height:45,url:I(c),userId:e}),s.jsxs("div",{className:r.text,children:[s.jsx("h3",{className:r.userName,children:t}),s.jsx("p",{className:r.desc,children:a})]})]}),s.jsxs("div",{className:r.right,children:[s.jsx(Zs,{className:r.close}),s.jsx("button",{className:r.button,children:"Follow"})]})]})}),ee=()=>s.jsx("div",{className:r.blog,children:s.jsxs("div",{style:{padding:"17px",display:"flex",backgroundColor:"#fff",alignItems:"center",borderRadius:"10px"},children:[s.jsx("div",{style:{marginRight:"10px"},children:s.jsx(j,{classes:["avatar","small"]})}),s.jsx(j,{classes:["field"]})]})}),oe=({title:t,profiles:e,loading:a})=>s.jsxs("div",{className:R.profileList,children:[s.jsx("div",{className:R.title,children:t}),s.jsxs("div",{className:R.profiles,children:[e&&e.map(c=>s.jsx(se,{description:c.description,nickname:c.nickname,id:c.id,avatar_url:c.avatar_url},c.id)),a&&[...Array(3).keys()].map(c=>s.jsx(ee,{},c))]})]});export{ae as G,oe as P,j as S,ce as a,Gs as b,ne as u};
